.\" Automatically generated by Pandoc 2.7.3
.\"
.TH "mw" "1" "" "Version 1.0" "mutt-wizard man page"
.hy
.SH NAME
.PP
\f[B]mw\f[R] \[em] mutt-wizard - add, list, remove email configurations
for mbsync, getmail and mutt.
Sync email without mutt.
.SH SYNOPSIS
.PP
\f[B]mw\f[R] [<command>|<email>]
.PP
\f[B]mw\f[R] Same as \f[I]mw sync\f[R]
.PD 0
.P
.PD
\f[B]mw add\f[R] Add and configure an email address (9 max.)
.PD 0
.P
.PD
\f[B]mw list\f[R] List configured accounts
.PD 0
.P
.PD
\f[B]mw remove\f[R] Pick an account to remove
.PD 0
.P
.PD
\f[B]mw purge\f[R] Remove all accounts and settings
.PD 0
.P
.PD
\f[B]mw cron\f[R] Enable or disable an autosync via cronjob
.PD 0
.P
.PD
\f[B]mw sync\f[R] Sync mail based on config in
\f[I].config/isync/mbsyncrc\f[R] and \f[I].config/getmail/*\f[R]
.PD 0
.P
.PD
\f[B]mw \[en]help|-h\f[R] Print this message
.PD 0
.P
.PD
\f[B]mw \[en]version|-v\f[R] Print version
.SH DESCRIPTION
.PP
\f[B]mw\f[R] configures \f[B]mbsync\f[R], \f[B]getmail\f[R],
\f[B]msmtp\f[R] and \f[B]mutt\f[R] in one go, or just \f[B]mutt\f[R].
Note, \f[B]mutt\f[R] stands for \f[B]mutt\f[R] or \f[B]neomutt\f[R], but
\f[B]mw\f[R] settings was only tested with \f[B]neomutt\f[R].
.SH COMMANDS
.PP
Without command parameter \f[B]sync\f[R] is assumed.
If a parameter contains \[at] an email is assumed and synced.
.PP
\f[I]add\f[R]
.RS
.PP
Add new email.
\[bu] .RS 2
.TP
.B First you decide, whether you want to configure
.IP \[bu] 2
\f[B]mbsync\f[R], \f[B]getmail\f[R], \f[B]msmtp\f[R] to sync emails
independently from \f[B]mutt\f[R] using \f[B]mw\f[R],
.IP \[bu] 2
or just \f[B]mutt\f[R].
For an IMAP server \f[B]mutt\f[R] becomes very slow.
Normally you enter \f[B]y\f[R].
.RE
.IP \[bu] 2
It asks you the \f[B]email address\f[R].
.IP \[bu] 2
It has a \f[B]database\f[R] of IMAP4/POP3 and SMTP servers and ports.
If you are lucky, your email server is there.
Else it will prompt you.
.RE
.PP
\f[I]ls|list\f[R]
.RS
.PP
List all email accounts configured by mutt-wizard
.RE
.PP
\f[I]rm|remove\f[R]
.RS
.PP
Remove the configuration files for an already configured email
.RE
.PP
\f[I]purge\f[R]
.RS
.PP
Removes all mw generated mutt settings and
.PP
\f[I].config/mutt/accounts/1-*\f[R]
.PD 0
.P
.PD
\f[I].config/isync/mbsyncrc\f[R]
.PD 0
.P
.PD
\f[I].config/getmail/*\f[R]
.PD 0
.P
.PD
\f[I].config/msmtp/config\f[R]
.PP
Files are under \f[I].config\f[R] or \f[I]$XDG_CONFIG_HOME\f[R].
.RE
.PP
\f[I]cron\f[R]
.RS
.PP
toggle a cronjob that periodically syncs mail
.RE
.PP
\f[I]sync\f[R]
.RS
.PP
syncs mail for all email accounts managed by \f[I]mw\f[R] (whose paths
end in the email).
This is the default, if no parameter is given.
If an email address is given, only that email is synced.
.IP \[bu] 2
Every \f[B]mw\f[R] sync run will re-generate the \f[B]mutt\f[R]
configuration from the configuration files for \f[B]mbsync\f[R],
\f[B]getmail\f[R] and \f[B]msmtp\f[R].
So you could edit them after or not use \f[I]mw add\f[R] at all.
.RS 2
.PP
Just keep the \f[I]Path\f[R], \f[I]path\f[R] and \f[I]account\f[R]
ending in the email address.
.RE
.IP \[bu] 2
The generated \f[B]mutt\f[R] configuration has these bindings
.RS 2
.IP \[bu] 2
\f[I]ixy/Mxy/Cxy\f[R] bindings to switch/move/copy to mailbox (x and y
stand for other letters)
.IP \[bu] 2
\f[I]i[1-9]\f[R] bindings to switch account
.RE
.IP \[bu] 2
\f[I]/usr/share/mutt-wizard/mutt-wizard.muttrc\f[R] is linked in your
\f[I]muttrc\f[R].
Have this line there, if you prefer your own settings:
.RS 2
.IP
.nf
\f[C]
# source /usr/share/mutt-wizard/mutt-wizard.muttrc
\f[R]
.fi
.PP
You will need to keep the binding of \f[I]i,g,C,M\f[R] to
\f[I]noop\f[R], though, because of the generated bindings in the account
muttrc.
Else you can overwrite certain things after the uncommented sourcing
line.
.RE
.RE
.SH DEPENDENCIES
.IP \[bu] 2
\f[I]pass\f[R] - pass (https://www.passwordstore.org/) safely encrypts
passwords (\f[B]required for email setup\f[R])
.IP \[bu] 2
\f[I]gnupg\f[R] - needed by \f[I]pass\f[R]
.IP \[bu] 2
\f[I]mutt/neomutt\f[R] - the email client (\f[I]mutt\f[R] untested).
.IP \[bu] 2
\f[I]isync\[cq]s mbsync\f[R] - syncs the mail
.IP \[bu] 2
\f[I]getmail\f[R] - used for POP3
.IP \[bu] 2
\f[I]msmtp\f[R] - sends the email
.PP
Optional:
.IP \[bu] 2
\f[I]w3m\f[R] - view HTML email and images in \f[B]mutt\f[R].
.IP \[bu] 2
\f[I]notmuch\f[R] - index and search mail.
If the configuration file in \f[I]$NOTMUCH_CONFIG\f[R] is not there,
\f[I]mw add\f[R] will create it.
.IP \[bu] 2
\f[I]libnotify\f[R] - allows notifications when syncing mail with
\f[I]mw\f[R]
.IP \[bu] 2
\f[I]abook\f[R] - a terminal-based address book.
.IP \[bu] 2
A cron manager (e.g.\ *cronie*) - if you want to enable the auto-sync
feature.
.IP \[bu] 2
\f[I]pam-gnupg\f[R] - To provide your GPG key at login and never after.
See directions (https://github.com/cruegge/pam-gnupg).
.RS 2
.PP
Alternatively increasing \f[I]default-cache-ttl\f[R] and
\f[I]max-cache-ttl\f[R] in \f[I]gpg-agent.conf\f[R] avoid constant
password requests.
.RE
.IP \[bu] 2
\f[I]urlscan\f[R] - outputs urls in mail
.SH INSTALLATION
.IP
.nf
\f[C]
git clone https://github.com/rpuntaie/mutt-wizard
cd mutt-wizard
sudo make install
\f[R]
.fi
.PP
User of Arch-based distros can also install mutt-wizard from the AUR as
mw-git (https://aur.archlinux.org/packages/mw-git/).
.SH MUTT-WIZARD\[aq]S NEOMUTT CONFIGURATION
.PP
Once everything is setup, you\[cq]ll use \f[B]mutt\f[R] to access your
mail.
.PP
Mutt usage with the accompanied \f[I]/usr/share/mutt-wizard.muttrc\f[R]:
.IP \[bu] 2
\f[I]?\f[R] - see all keyboard shortcuts
.PP
\f[B]syncing\f[R]
.IP \[bu] 2
\f[I]gm / gM\f[R] - call mutt-wizard\[cq]s \f[I]mw sync\f[R] for one /
all mail accounts
.PP
\f[B]mailboxes,accounts\f[R]
.IP \[bu] 2
\f[I]ixy\f[R] - To go to \f[B]mailbox\f[R].
.IP \[bu] 2
\f[I]Mxy\f[R], \f[I]Cxy\f[R] - For \f[I]M\f[R]ove and \f[I]C\f[R]opy to
the according mailbox, e.g.\ \f[I]Msp\f[R] means \[lq]move to Spam\[rq].
.IP \[bu] 2
\f[I]i#\f[R] - Press \f[I]i\f[R] followed by a number 1-9 to go to a
\f[B]different account\f[R].
.RS 2
.PP
\f[I]xy\f[R] are
.IP \[bu] 2
two first letters of mailbox letters or
.IP \[bu] 2
first letter of first path entry + second letter of second path entries
.RE
.PP
\f[B]searching\f[R]
.IP \[bu] 2
\f[I]S\f[R] - search for a mail using \f[I]notmuch\f[R]
.IP \[bu] 2
\f[I]gl\f[R] - limit by substring of subject
.IP \[bu] 2
\f[I]gL\f[R] - undo limit
.PP
\f[B]composing\f[R]
.IP \[bu] 2
\f[I]ga\f[R] - to add address/person to \f[I]abook\f[R] and
\f[I]Tab\f[R] while typing address to complete one from book.
.IP \[bu] 2
\f[I]m/r/gr/f\f[R] - new/reply/group reply/forward \f[B]message\f[R],
using your default \f[I]$EDITOR\f[R] to write.
Then you enter the \f[B]compose screen\f[R].
.IP \[bu] 2
\f[I]a\f[R] - to add attachments
.IP \[bu] 2
\f[I]s/t/c/b/d\f[R] - to change the subject/to/CC/BCC/description.
.IP \[bu] 2
\f[I]S\f[R] - to change the signature/encryption
.IP \[bu] 2
\f[I]y\f[R] - to send the mail.
.PP
\f[B]delete,undelete,save\f[R]
.IP \[bu] 2
\f[I]dd\f[R] - delete mail
.IP \[bu] 2
\f[I]u\f[R] - undelete
.IP \[bu] 2
\f[I]$\f[R] - apply the mailbox changes \f[I]set trash\f[R] is set per
default.
Deleted mails will land there.
.IP \[bu] 2
\f[I]s\f[R] - save selected mail or selected attachment
.PP
\f[B]moving around\f[R]
.IP \[bu] 2
\f[I]gu\f[R] - open a menu to select a url you want to open in you
browser (needs urlscan).
.IP \[bu] 2
\f[I]j\f[R]/\f[I]k\f[R] - next/previous mail, \f[I]J/K\f[R] same,
without skipping deleted, and also when viewing mails
.IP \[bu] 2
\f[I]ctrl-d/f\f[R]/\f[I]ctrl-u/b\f[R] - down and up a half page / full
page
.IP \[bu] 2
\f[I]l\f[R] - open mail, or attachment page or attachment
.IP \[bu] 2
\f[I]h\f[R] - the opposite of \f[I]l\f[R]
.PP
\f[B]sidebar\f[R]
.IP \[bu] 2
\f[I]B\f[R] - toggles
.IP \[bu] 2
\f[I]ctrl-j\f[R]/\f[I]ctrl-k\f[R] - move up and down
.IP \[bu] 2
\f[I]ctrl-l/o\f[R] - opens mailbox
.PP
\f[B]input field/command line\f[R]
.IP \[bu] 2
\f[I]ctrl-u\f[R] will clear it
.IP \[bu] 2
\f[I]ctrl-a\f[R], \f[I]ctrl-e\f[R] go to beginning or end,
\f[I]ctrl-g\f[R] aborts
.PP
Look into \f[I]/usr/share/mutt-wizard.muttrc\f[R] to see all bindings.
.SH DETAILS
.TP
.B Encoding
.RS
.PP
\f[I]isync\f[R] is not fully UTF-8 compatible.
Non-Latin characters may be garbled (although sync should succeed).
\f[I]mw\f[R] will also not auto-create mailbox shortcuts since it is
looking for English mailbox names.
I strongly recommend you to set your email language to English on your
mail server to avoid these problems.
.RE
.PP
\f[B]Mail location\f[R]
.RS
.PP
Mail is downloaded to a folder named after your email in
\f[I]$MAILDIR\f[R], which defaults to \f[I]$HOME/Mail/\f[R], the default
for mutt.
Neither \f[B]mw remove\f[R] nor \f[B]mw purge\f[R] will delete
downloaded mail.
Do that manually.
.RE
.PP
\f[B]Gmail accounts\f[R]
.RS
.PP
Google will require you to allow \[dq]less-secure\[dq] (third party)
applications or use two-factor authentication in order to access their
IMAP servers to download your mail.
If you use Gmail, be sure to handle this before running mutt-wizard
<<https://support.google.com/accounts/answer/6010255>>.
.RE
.PP
\f[B]Protonmail accounts\f[R]
.RS
.PP
Protonmail users must use the Protonmail Bridge
<<https://protonmail.com/bridge/>> to access their IMAP and SMTP
servers.
This too should be configured before running mutt-wizard.
.RE
.PP
\f[B]Enterprise and university accounts\f[R]
.RS
.PP
Many universities and businesses might host their domain\[aq]s email via
Google or another service.
This often requires a special IMAP/SMTP-specific password that you must
generate and use.
Again, mutt-wizard can handle these systems, but only once they have
been set up.
.RE
.SH FILES
.TP
.B \f[I]/user/bin/mw\f[R]
The main script to manage and sync emails.
.TP
.B \f[I]/user/bin/mwimage\f[R], \f[I]/user/bin/mwopen\f[R]
Used by the mailcap file that comes with mutt-wizard.
.TP
.B \f[I]/usr/share/mutt-wizard/mutt-wizard.muttrc\f[R]
Default mutt settings.
.TP
.B \f[I]/usr/share/mutt-wizard/mailcap\f[R]
Default mailcap file.
.TP
.B \f[I]/usr/share/mutt-wizard/domains.csv\f[R]
Email server database.
.SH BUGS
.PP
GitHub Issues: <<https://github.com/rpuntaie/mutt-wizard/issues>>
.SH AUTHORS
.TP
.B \f[I]Luke Smith\f[R] <<luke@lukesmith.xyz>>
Original author, started in 2018.
.RS
.PP
Github <<https://github.com/lukesmithxyz/mutt-wizard>>
.PP
Gitlab <<https://gitlab.com/lukesmithxyz/mutt-wizard>>
.RE
.TP
.B \f[I]Roland Puntaier\f[R] <<roland.puntaier@gmail.com>>
Bugfixes, Improvements in 2019.
.RS
.PP
GitHub: <<https://github.com/rpuntaie/mutt-wizard>>
.IP \[bu] 2
Honors \f[I]:math:\[ga]MAILDIR\f[R], \f[I]\[ga]XDG_CONFIG_HOME\f[R],
\f[I]$XDG_CACHE_HOME\f[R], if defined.
.IP \[bu] 2
\f[I]gm/gM\f[R] to sync mail inside \f[I]mutt\f[R], as \f[I]o/O\f[R] has
a \f[I]mutt\f[R] assignment already.
.IP \[bu] 2
Other more vim-like shortcut changes
.IP \[bu] 2
Make channel name equal to email address to avoid choosing a new name
for the same thing.
.IP \[bu] 2
\f[I]remove|rm\f[R] instead of \f[I]delete\f[R], \f[I]list|ls\f[R]
instead of only \f[I]ls\f[R]
.IP \[bu] 2
\f[I]wm\f[R] integrates \f[I]mailsync\f[R], not to overload the system
namespace and because of code reuse
.IP \[bu] 2
\f[I]wm\f[R] generates \f[I]mutt\f[R] config on every full sync,
.RS 2
.IP \[bu] 2
to reflect changes in mailboxes in the shortcuts
.IP \[bu] 2
to reflect changes in \f[I]mbsync/getmail\f[R] config in \f[I]mutt\f[R]
config
.RE
.IP \[bu] 2
\f[I]urlscan\f[R] instead of \f[I]urlview\f[R]
.IP \[bu] 2
Added tests and made bug fixes
.IP \[bu] 2
Generate man page from readme, to avoid duplicate descriptions
.RE
.SH LICENSE
.PP
GPLv3
.SH SEE ALSO
.PP
\f[B]neomutt\f[R](1), \f[B]neomuttrc\f[R](1) \f[B]mbsync\f[R](1),
\f[B]msmtp\f[R](1), \f[B]notmuch\f[R](1), \f[B]abook\f[R](1)
